移动端调试工具
---


## 1. vConsole

> vConsole 是腾讯推出的一个轻量、可拓展、针对手机网页的前端开发者调试面板。项目地址 [vConsole](https://github.com/Tencent/vConsole)，项目 [介绍](https://github.com/Tencent/vConsole/blob/dev/README_CN.md)。

### 1.1 特性

*   查看 console 日志
*   查看网络请求
*   查看页面 element 结构
*   查看 Cookies、localStorage 和 SessionStorage
*   手动执行 JS 命令行
*   自定义插件

### 1.2 使用

下载 vConsole 的[最新版本](https://github.com/Tencent/vConsole/releases/latest)。（不要直接下载 dev 分支下的 `dist/vconsole.min.js`）

或者使用 npm 安装：

```
npm install vconsole
```

引入 `dist/vconsole.min.js` 到项目中：

```html
<script src="path/to/vconsole.min.js"></script>
<script>
  // 初始化
  var vConsole = new VConsole();
  console.log('Hello world');
</script>
```

对于 TypeScript，可引入 d.ts 文件：

```js
import 'path/to/vconsole.min.d.ts';
```

详细使用方法请参阅[使用教程](https://github.com/Tencent/vConsole/blob/dev/doc/tutorial_CN.md)。

然后你就可以在页面的右下角看到一个绿色的 `vConsole`，点开它就能使用了，整体界面和 Chrome 的控制台类似，非常方便！

![-w500](media/15956864594806/16189917336622.jpg)


不过，这样引入的话无论是在电脑上还是手机上，无论是作者和访客都能看到这个按钮。有点不太友好……为此，我们可以采用下面的方法：

```javascript
<script>
if ((location.href || '').indexOf('vconsole=true') > -1) {
    document.write('<script src="https://cdn.bootcss.com/vConsole/3.3.0/vconsole.min.js"><\/script>');
    document.write('<script>new VConsole()<\/script>');
}
</script>
```

这样，正常访问网站时不会加载这个工具，仅当在网址后面加上 ?vconsole=true 时才会载入,按需开启，非常好用！

### 1.3 测试预览

![](media/15956864594806/16189917536217.png)


## 2. Eruda

> [Eruda](https://github.com/liriliri/eruda) 是一个专为手机网页前端设计的调试面板，类似 DevTools 的迷你版，其主要功能包括：捕获 console 日志、检查元素状态、捕获XHR请求、显示本地存储和 Cookie 信息等等。

### 2.1 功能特性

![-w500](media/15956864594806/16189917622207.png)


*   按钮拖拽，面板透明度大小设置。
*   Console 面板：捕获 Console 日志，支持 log、error、info、warn、dir、time/timeEnd、clear、count、assert、table；支持占位符，包括 %c 自定义样式输出；支持按日志类型及正则表达式过滤；支持 JavaScript 脚本执行。
*   Elements 面板：查看标签内容及属性；查看应用在 Dom 上的样式；支持页面元素高亮；支持屏幕直接点击选取；查看 Dom 上绑定的各类事件。
*   Network 面板：捕获请求，查看发送数据、返回头、返回内容等信息。
*   Resources 面板：查看并清除 localStorage、sessionStorage 及 cookie；查看页面加载脚本及样式文件；查看页面加载图片。
*   Sources 面板：查看页面源码；格式化 html，css，js 代码及 json 数据。
*   Info 面板：输出 URL 及 User Agent；支持自定义输出内容。
*   Snippets 面板：页面元素添加边框；加时间戳刷新页面；支持自定义代码片段。

### 2.2 快速上手

通过CDN使用：

```html
<script src="//cdn.bootcss.com/eruda/1.5.2/eruda.min.js"></script>
<script>eruda.init();</script>
```

通过 npm 安装：

```shell
npm install eruda --save
```

在页面中加载脚本：

```html
<script src="node_modules/eruda/eruda.min.js"></script>
<script>eruda.init();</script>
```

Js 文件对于移动端来说略重（gzip 后大概 100kb）。建议通过 url 参数来控制是否加载调试器，比如：

```javascript
;(function () {
    var src = '//cdn.jsdelivr.net/npm/eruda';
    if (!/eruda=true/.test(window.location) && localStorage.getItem('active-eruda') != 'true') return;
    document.write('<scr' + 'ipt src="' + src + '"></scr' + 'ipt>');
    document.write('<scr' + 'ipt>eruda.init();</scr' + 'ipt>');
})();
```

初始化时可以传入配置：

*   container: 用于插件初始化的 Dom 元素，如果不设置，默认创建 div 作为容器直接置于 html 根结点下面。
*   tool：指定要初始化哪些面板，默认加载所有。

```javascript
let el = document.createElement('div');
document.body.appendChild(el);

eruda.init({
    container: el,
    tool: ['console', 'elements'],
    useShadowDom: true
});
```

### 2.3 测试预览

![](media/15956864594806/16189917695091.png)
