博客搭建教程记录
---

## 宝塔安装
> [官网](https://www.bt.cn/download/linux.html) 很详细这里不做记录。
 
 对于小白来说，宝塔是一个非常牛逼的服务器管理工具，如果你想折腾服务器玩博客而又感觉无从下手，那你先安装它试试吧。
 
## 域名相关

### [1. 域名注册](https://dnspod.cloud.tencent.com/)

腾讯域名注册相对还是比较便宜的, 具体的价格可以在 [点击这里](https://buy.cloud.tencent.com/domain?price=1&from=dnspodEntrance) 查看，新用户注册有活动，需要的可以了解一下。

![](http://oss.xiaodongxier.com/blog/image/20200403094929.png?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/10/dy/5)

### [2. 域名备案](https://console.cloud.tencent.com/beian)

目前腾讯备案也很方便是电子备案，无需向以前邮寄幕布什么的很麻烦，只需微信扫码填写相关信息即可，提交后腾讯审核专员会在 1 个工作日打电话进行沟通审核，审核通过才会递交到当地管理局进行最终审核，审核时间忘记了，大概是 15 日左右。

![](http://oss.xiaodongxier.com/blog/image/20200403095726.png?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/10/dy/5)

### [3. 域名解析](https://console.cloud.tencent.com/domain)

这一步是域名解析到服务器上，只有在这样网站才能正常访问，在这里可以设置二级域名或者泛解析等操作，然后把服务器填写到记录值一项，点击保存即可，一般会立即生效可以访问，如果没有生效，需要等个几分钟。

![](http://oss.xiaodongxier.com/blog/image/20200403095942.png?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/10/dy/5)


## 主题相关
 
> 主题项目地址：https://github.com/vtrois/kratos

![](http://oss.xiaodongxier.com/blog/static/jpg/20200403131223.jpg?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/0/dy/0)

 本博客选择的是 [kratos](https://github.com/vtrois/kratos) 主题，版本信息可 [点击这里](https://github.com/Vtrois/Kratos/releases) 进行查看，目前最新版本是 [v3.0.7](https://github.com/Vtrois/Kratos/releases/tag/v3.0.7)，因为主题作者的博客暂时无法访问，所以只能通过git 项目中的 [issues](https://github.com/vtrois/kratos/issues) 进行了解相关的使用问题及解决方法，。

## 搭建步骤

### 1. 创建站点

> 宝塔后台添加站点

![站点添加](http://oss.xiaodongxier.com/blog/image/20200403101207.png?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/10/dy/5)

需要创建数据库，其他项按要求填写即可，保存即可。
数据库用户名和密码需要记录，后续会用到。

### [1. 安装 WordPress](https://cn.wordpress.org/download/)

把下载的 [ WordPress 5.4](https://cn.wordpress.org/latest-zh_CN.zip)  上传到创建站点的根目录进行解压即可。

![](http://oss.xiaodongxier.com/blog/image/20200403102201.png?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/10/dy/5)

### [2. 安装主题](https://github.com/vtrois/kratos)

把下载的 [主题](https://github.com/Vtrois/Kratos/archive/v3.0.7.zip)  上传到刚才解压的文件夹中的：`wordpress` > `wp-content` > `themes `  进行解压即可。

![](http://oss.xiaodongxier.com/blog/image/20200403102415.png?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/10/dy/5)

### 3.  进行安装和配置

> 访问创建站点时候绑定的**域名**进行相关配置

![](http://oss.xiaodongxier.com/blog/static/jpg/20200403103206.jpg?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/0/dy/0)

![](http://oss.xiaodongxier.com/blog/static/jpg/20200403103425.jpg?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/0/dy/0)

![](http://oss.xiaodongxier.com/blog/static/jpg/20200403103443.jpg?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/0/dy/0)

![](http://oss.xiaodongxier.com/blog/static/jpg/20200403103502.jpg?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/0/dy/0)

![](http://oss.xiaodongxier.com/blog/static/jpg/20200403103956.jpg?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/0/dy/0)


![](http://oss.xiaodongxier.com/blog/static/jpg/20200403103550.jpg?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/0/dy/0)

## 遇到的问题

### 1. 去除 url 中 index.php 路径名

![](http://oss.xiaodongxier.com/blog/static/jpg/20200403103637.jpg?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/0/dy/0)

### 2. 去除url 中category及出现 404 问题

> 分类目前前缀输入英文句号： "." 然后保存

![](http://oss.xiaodongxier.com/blog/static/jpg/20200403103810.jpg?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/0/dy/0)

![](http://oss.xiaodongxier.com/blog/static/jpg/20200403103825.jpg?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/0/dy/0)

> 上步完成后，其前期设置的导航及文章点进去会出现 404
> 解决办法是在自定义结果前添加：`/%category%` 保存即可

![](http://oss.xiaodongxier.com/blog/static/jpg/20200403103848.jpg?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/0/dy/0)

### 3. 主题升级

> 参考：https://github.com/Vtrois/Kratos/issues/188

![主题升级](http://oss.xiaodongxier.com/blog/static/jpg/20200413112202.jpg?imageView2/0/interlace/1/q/70|watermark/2/text/eGlhb2Rvbmd4aWVyLmNvbQ==/font/YXJpYWw=/fontsize/600/fill/IzUxQURFRA==/dissolve/100/gravity/SouthEast/dx/0/dy/0)


